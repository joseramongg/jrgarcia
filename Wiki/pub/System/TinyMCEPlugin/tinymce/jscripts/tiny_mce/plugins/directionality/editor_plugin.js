tinymce.create("tinymce.plugins.Directionality",{init:function(t,i){function e(i){var e,n=t.dom,o=t.selection.getSelectedBlocks();o.length&&(e=n.getAttrib(o[0],"dir"),tinymce.each(o,function(t){n.getParent(t.parentNode,"*[dir='"+i+"']",n.getRoot())||(e!=i?n.setAttrib(t,"dir",i):n.setAttrib(t,"dir",null))}),t.nodeChanged())}this.editor=t,t.addCommand("mceDirectionLTR",function(){e("ltr")}),t.addCommand("mceDirectionRTL",function(){e("rtl")}),t.addButton("ltr",{title:"directionality.ltr_desc",cmd:"mceDirectionLTR"}),t.addButton("rtl",{title:"directionality.rtl_desc",cmd:"mceDirectionRTL"}),t.onNodeChange.add(this._nodeChange,this)},getInfo:function(){return{longname:"Directionality",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/directionality",version:tinymce.majorVersion+"."+tinymce.minorVersion}},_nodeChange:function(t,i,e){var n,o=t.dom;if(!(e=o.getParent(e,o.isBlock)))return i.setDisabled("ltr",1),void i.setDisabled("rtl",1);n=o.getAttrib(e,"dir"),i.setActive("ltr","ltr"==n),i.setDisabled("ltr",0),i.setActive("rtl","rtl"==n),i.setDisabled("rtl",0)}}),tinymce.PluginManager.add("directionality",tinymce.plugins.Directionality);
