"use strict";!function(n){foswiki.openDialog=function(e,o){n.log("SM: called openDialog data"),n("body").css("cursor","process"),void 0!==typeof(o=n.extend({},o))._origOnShow&&(o._origOnShow=o.onShow,o.onShow=function(e){n.isFunction(o._origOnShow)&&o._origOnShow(e),function(e,o){n.log("SM: called init"),n("body").css("cursor","auto"),setTimeout(function(){n(window).trigger("resize.simplemodal"),e.container.fadeIn()},100),e.container.find(".jqSimpleModalOK:not(.jqInitedSimpleModalOK)").each(function(){n(this).addClass("jqInitedSimpleModalOK").click(function(i){return n.log("SM: clicked ok"),n.modal.close(),"function"==typeof o.onSubmit&&o.onSubmit(e),i.preventDefault(),!1})}),e.container.find(".jqSimpleModalCancel:not(.jqInitedSimpleModalCancel)").each(function(){n(this).addClass("jqInitedSimpleModalCancel").click(function(i){return n.log("SM: clicked cancel"),n.modal.close(),"function"==typeof o.onCancel&&o.onCancel(e),i.preventDefault(),!1})}),"function"==typeof o.onCancel&&e.container.find(".simplemodal-close").click(function(){o.onCancel(e)}),e.container.find(".jqSimpleModalDraggable").each(function(){var o=n.extend({handle:".jqSimpleModalDraggable"},n(this).data(),n(this).metadata());e.container.draggable(o)}),e.container.find(".jqSimpleModalResizable:first").each(function(){var o=n.extend({handles:"se"},n(this).metadata());e.container.resizable(o)})}(e,o)}),o.onOpen=function(e){n.log("SM: called onOpen"),e.overlay.show(),e.container.hide(),e.data.show()},n(e).modal(o)};var e={persist:!1,close:!0,opacity:40};n(function(){n(".jqSimpleModal:not(.jqInitedSimpleModal)").livequery(function(){var o=n(this);o.addClass("jqInitedSimpleModal").click(function(i){var a=n.extend({},e,o.metadata());return a.url?n.get(a.url,function(e){var i=n(e),t=i.attr("id");t||(t=foswiki.getUniqueID()),i.attr("id",t).hide(),n("body").append(i),n.log("SM: id="+t),o.attr("simple-modal-data","#"+t),foswiki.openDialog("#"+t,a)}):foswiki.openDialog(a.data,a),i.preventDefault(),!1})})})}(jQuery);
