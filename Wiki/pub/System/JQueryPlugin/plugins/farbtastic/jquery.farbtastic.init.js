"use strict";!function(t){function a(t,a,n){return function(t){var a,n,r,e,i,o,c=t[0],s=t[1],l=t[2];return a=Math.min(c,Math.min(s,l)),n=Math.max(c,Math.max(s,l)),r=n-a,o=(a+n)/2,i=0,o>0&&o<1&&(i=r/(o<.5?2*o:2-2*o)),e=0,r>0&&(n===c&&n!==s&&(e+=(s-l)/r),n===s&&n!==l&&(e+=2+(l-c)/r),n===l&&n!==c&&(e+=4+(c-s)/r),e/=6),[e,i,o]}(function(t){var a=/^rgb\((.*?),(.*?),(.*?)\)/;return 7===t.length?[parseInt("0x"+t.substring(1,3))/255,parseInt("0x"+t.substring(3,5))/255,parseInt("0x"+t.substring(5,7))/255]:4===t.length?[parseInt("0x"+t.substring(1,2))/15,parseInt("0x"+t.substring(2,3))/15,parseInt("0x"+t.substring(3,4))/15]:a.test(t)?[parseFloat(t.replace(a,"$1")/255),parseFloat(t.replace(a,"$2")/255),parseFloat(t.replace(a,"$3")/255)]:t}(t))[2]>.5?a||"#000":n||"#FFF"}function n(n,r){function e(t){var n=a(t);r.val(t).css({"background-color":t,color:n})}var i=r.val();return i&&e(i),t.farbtastic(n).linkTo(e)}var r={fade:250,position:"bottom",callback:function(a){t.log("new color="+a)}};t(function(){var a=t("#colorpicker");0===a.length&&(a=t('<div class="ui-component-content ui-widget-content ui-hidden ui-helper-hidden" id="colorpicker"></div>').appendTo("body")),t(".jqFarbtastic:not(.jqInitedFarbtastic)").livequery(function(){var e,i=t(this),o=t.extend({},r,i.data(),i.metadata());i.addClass("jqInitedFarbtastic"),e=n(a,i),i.click(function(){function t(){var t;0===i.length&&c?window.clearInterval(c):(t=i.offset(),"left"===o.position&&(t.left+=i.outerWidth()),"bottom"===o.position&&(t.top+=i.outerHeight()),r&&r.top===t.top&&r.left===t.left||(r=t,a.css({top:t.top,left:t.left})))}var r,c;e=n(a,i),t(),c=window.setInterval(t,500),a.farbtastic().fadeIn(o.fade)}).blur(function(){a.farbtastic().hide(),"function"==typeof o.callback&&o.callback.call(e,e.color)})})}),t(function(){var n={dark:"#000",light:"#fff"};t(".jqFarbtasticFG:not(.jqInitedFarbtasticFG)").livequery(function(){var r=t(this),e=t.extend({},n,r.data(),r.metadata()),i=a(r.css("background-color"),e.dark,e.light);r.addClass("jqInitedFarbtastic").css({color:i})})})}(jQuery);
