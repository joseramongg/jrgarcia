function CreateStrip(t,e,r,n,i){var s=document.createElement("b");return s.className=i+t,jQuery(s).css("backgroundColor",r).css("borderColor",n),"left"==e?jQuery(s).css("borderRightWidth","0").css("marginRight","0"):"right"==e&&jQuery(s).css("borderLeftWidth","0").css("marginLeft","0"),s}function _niftyPBC(t){for(var e,r=t.parentNode;"HTML"!=r.tagName.toUpperCase()&&"transparent"==(e=_niftyBC(r));)r=r.parentNode;return"transparent"==e&&(e="#FFFFFF"),e}function _niftyBC(t){var e=jQuery(t).css("backgroundColor");if(null==e||"transparent"==e||e.indexOf("rgba(0, 0, 0, 0)")>=0)return"transparent";if(e.indexOf("rgb")>=0){for(var r="",n=/([0-9]+)[, ]+([0-9]+)[, ]+([0-9]+)/.exec(e),i=1;i<4;i++){var s=parseInt(n[i]).toString(16);1==s.length?r+="0"+s:r+=s}e="#"+r}return e}function _niftyGP(t,e){var r=jQuery(t).css("padding"+e);return null==r||-1==r.indexOf("px")?0:parseInt(r)}function _niftyMix(t,e){var r,n,i,s,a,f=new Array(3);for(n=4==t.length?1:2,i=4==e.length?1:2,"white"==t&&(t="#ffffff"),"white"==e&&(e="#ffffff"),"black"==t&&(t="#000000"),"black"==e&&(e="#000000"),r=0;r<3;r++)s=parseInt(t.substr(1+n*r,n),16),1==n&&(s=16*s+s),a=parseInt(e.substr(1+i*r,i),16),1==i&&(a=16*a+a),f[r]=Math.floor((50*s+50*a)/100),f[r]=f[r].toString(16),1==f[r].length&&(f[r]="0"+f[r]);return"#"+f[0]+f[1]+f[2]}jQuery.fn.nifty=function(t){if(0!=(document.getElementById&&document.createElement&&Array.prototype.push))return t=t||"",h=t.indexOf("fixed-height")>=0?this.offsetHeight:0,this.each(function(){var e="",r="";if(""!=t&&((t=(t=(t=(t=(t=t.replace("left","tl bl")).replace("right","tr br")).replace("top","tr tl")).replace("bottom","br bl")).replace("transparent","alias")).indexOf("tl")>=0?(e="both",-1==t.indexOf("tr")&&(e="left")):t.indexOf("tr")>=0&&(e="right"),t.indexOf("bl")>=0?(r="both",-1==t.indexOf("br")&&(r="left")):t.indexOf("br")>=0&&(r="right")),""==e&&""==r&&-1==t.indexOf("none")&&(e="both",r="both"),null!=this.currentStyle&&null!=this.currentStyle.hasLayout&&0==this.currentStyle.hasLayout&&jQuery(this).css("display","inline-block"),""!=e){var n=document.createElement("b"),i=4,s="",a="r";for(jQuery(n).css("marginLeft","-"+_niftyGP(this,"Left")+"px"),jQuery(n).css("marginRight","-"+_niftyGP(this,"Right")+"px"),t.indexOf("alias")>=0||"transparent"==(c=_niftyBC(this))?(c="transparent",o="transparent",s=_niftyPBC(this),a="t"):s=_niftyMix(c,o=_niftyPBC(this)),jQuery(n).css("background",o),n.className="niftycorners",f=_niftyGP(this,"Top"),t.indexOf("small")>=0?(jQuery(n).css("marginBottom",f-2+"px"),a+="s",i=2):t.indexOf("big")>=0?(jQuery(n).css("marginBottom",f-10+"px"),a+="b",i=8):jQuery(n).css("marginBottom",f-5+"px"),h=1;h<=i;h++)jQuery(n).append(CreateStrip(h,e,c,s,a));jQuery(this).css("paddingTop","0px"),jQuery(this).prepend(n)}if(""!=r){var f,h,o,c;n=document.createElement("b"),i=4,s="",a="r";for(jQuery(n).css("marginLeft","-"+_niftyGP(this,"Left")+"px"),jQuery(n).css("marginRight","-"+_niftyGP(this,"Right")+"px"),t.indexOf("alias")>=0||"transparent"==(c=_niftyBC(this))?(c="transparent",o="transparent",s=_niftyPBC(this),a="t"):s=_niftyMix(c,o=_niftyPBC(this)),jQuery(n).css("background",o),n.className="niftycorners",f=_niftyGP(this,"Bottom"),t.indexOf("small")>=0?(jQuery(n).css("marginTop",f-2+"px"),a+="s",i=2):t.indexOf("big")>=0?(jQuery(n).css("marginTop",f-10+"px"),a+="b",i=8):jQuery(n).css("marginTop",f-5+"px"),h=i;h>0;h--)jQuery(n).append(CreateStrip(h,r,c,s,a));jQuery(this).css("paddingBottom","0"),jQuery(this).append(n)}}),t.indexOf("height")>=0&&this.each(function(){this.offsetHeight>h&&(h=this.offsetHeight),jQuery(this).css("height","auto");var t=h-this.offsetHeight;if(t>0){var e=document.createElement("b");e.className="niftyfill",jQuery(e).css("height",t+"px"),nc=this.lastChild,"niftycorners"==nc.className?this.insertBefore(e,nc):jQuery(this).append(e)}}),this};
