!function(e){e.extend(e.fn,{livequery:function(n,i){var u,s=this;return e.each(t.queries,function(e,t){if(!(s.selector!=t.selector||s.context!=t.context||n&&n.$lqguid!=t.fn.$lqguid||i&&i.$lqguid!=t.fn2.$lqguid))return(u=t)&&!1}),u=u||new t(s.selector,s.context,n,i),u.stopped=!1,u.run(),s},expire:function(n,i){var u=this;return e.each(t.queries,function(e,s){u.selector!=s.selector||u.context!=s.context||n&&n.$lqguid!=s.fn.$lqguid||i&&i.$lqguid!=s.fn2.$lqguid||u.stopped||t.stop(s.id)}),u}});var t=e.livequery=function(n,i,u,s){return this.selector=n,this.context=i,this.fn=u,this.fn2=s,this.elements=e([]),this.stopped=!1,this.id=t.queries.push(this)-1,u.$lqguid=u.$lqguid||t.guid++,s&&(s.$lqguid=s.$lqguid||t.guid++),this};t.prototype={stop:function(){this.stopped||(this.fn2&&this.elements.each(this.fn2),this.elements=e([]),this.stopped=!0)},run:function(){if(!this.stopped){var t=this.elements,n=e(this.selector,this.context),i=n.not(t),u=t.not(n);this.elements=n,i.each(this.fn),this.fn2&&u.each(this.fn2)}}},e.extend(t,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(t.running&&t.queue.length)for(var e=t.queue.length;e--;)t.queries[t.queue.shift()].run()},pause:function(){t.running=!1},play:function(){t.running=!0,t.run()},registerPlugin:function(){e.each(arguments,function(n,i){if(e.fn[i]){var u=e.fn[i];e.fn[i]=function(){var e=u.apply(this,arguments);return t.run(),e}}})},run:function(n){void 0!=n?e.inArray(n,t.queue)<0&&t.queue.push(n):e.each(t.queries,function(n){e.inArray(n,t.queue)<0&&t.queue.push(n)}),t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout(t.checkQueue,20)},stop:function(n){void 0!=n?t.queries[n].stop():e.each(t.queries,t.prototype.stop)}}),t.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html","prop","removeProp"),e(function(){t.play()})}(jQuery);
