!function(t){function e(e){return t.data(e,"tooltip")}function o(i){if(!(t.tooltip.blocked||i&&"OPTION"==i.target.tagName))if(null!==n){var a=e(n);!a.track&&p.parent.is(":visible")&&t(document.body).unbind("mousemove",o),p.parent.removeClass("viewport-right viewport-bottom");var s=p.parent[0].offsetLeft,d=p.parent[0].offsetTop;i&&(s=i.pageX+a.left,d=i.pageY+a.top,p.parent.css({left:s,right:"auto",top:d}));var l={x:t(window).scrollLeft(),y:t(window).scrollTop(),cx:t(window).width(),cy:t(window).height()},r=p.parent[0];l.x+l.cx<r.offsetLeft+r.offsetWidth&&(s-=r.offsetWidth+20+a.left,p.parent.css({left:s+"px"}).addClass("viewport-right")),l.y+l.cy<r.offsetTop+r.offsetHeight&&(d-=r.offsetHeight+20+a.top,p.parent.css({top:d+"px"}).addClass("viewport-bottom"))}else t(document.body).unbind("mousemove",o)}function i(){function t(){p.parent.show().css("opacity","1.0")}var i=e(n);l=null,i.fade?p.parent.is(":animated")?p.parent.stop().fadeTo(i.fade,n.tOpacity,t):p.parent.is(":visible")?p.parent.stop().fadeTo(i.fade,n.tOpacity,t):p.parent.stop().fadeIn(i.fade,t):t(),o()}function a(){var a=e(this);if(!t.tooltip.blocked&&this!=n&&(this.tooltipText||a.bodyHandler)){if(n=this,d=this.tooltipText,a.bodyHandler){p.title.hide();var s=a.bodyHandler.call(this);s.nodeType||s.jquery?p.body.empty().append(s):p.body.html(s),p.body.show()}else if(a.showBody){var h=d.split(a.showBody);if(p.title.empty(),p.body.empty(),h.length>1){p.title.html(h.shift()).show();for(var f,c=0;f=h[c];c++)c>0&&p.body.append("<br/>"),p.body.append(f)}else p.body.html(h.shift()).show();p.body.hideWhenEmpty(),p.title.hideWhenEmpty()}else p.title.html(d).show(),p.body.hide();a.showURL&&t(this).url()?p.url.html(t(this).url().replace("http://","")).show():p.url.hide(),r&&r!=a.extraClass&&p.parent.removeClass(r),p.parent.addClass(a.extraClass),r=a.extraClass,function(a){var s=e(this);p.parent.stop(),s.delay&&!p.parent.is(":animated")?l=window.setTimeout(i,s.delay):i(),t(document.body).bind("mousemove",o),o(a)}.apply(this,arguments)}}function s(o){function i(){p.parent.hide().css("opacity","")}var a=e(this);t.tooltip.blocked||(l&&window.clearTimeout(l),n=null,a.fade?p.parent.is(":animated")||p.parent.stop().fadeOut(a.fade,i):i())}var n,d,l,r,p={};t.tooltip={blocked:!1,defaults:{delay:200,fade:!1,showURL:!0,extraClass:"",id:"tooltip",top:0,left:0},block:function(){t.tooltip.blocked=!t.tooltip.blocked}},t.fn.extend({tooltip:function(e){return e=t.extend({},t.tooltip.defaults,e),function(e){p.parent||(p.parent=t('<div id="'+e.id+'"><h3></h3><div class="body"></div><div class="url"></div></div>').appendTo(document.body).hide(),t.fn.bgiframe&&p.parent.bgiframe(),p.title=t("h3",p.parent),p.body=t("div.body",p.parent),p.url=t("div.url",p.parent))}(e),this.each(function(){t.data(this,"tooltip",e),this.tOpacity=p.parent.css("opacity"),this.tooltipText=this.title,t(this).removeAttr("title"),this.alt=""}).mouseover(a).mouseout(s).click(s).bind("keypress",s)},hideWhenEmpty:function(){return this.each(function(){t(this)[t(this).html()?"show":"hide"]()})},url:function(){return this.attr("href")||this.attr("src")}})}(jQuery);
