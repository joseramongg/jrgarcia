!function(r){"use strict";var t={};r.loadTmpl=function(e,n){if(n=n||{},"string"==typeof e?n.url=e:"object"==typeof e&&(n=e),void 0===n.url)throw"ERROR: no url specified in loadTmpl";n.name=n.name||n.url||function(){var r,t=(new Date).getTime().toString(32);for(r=0;r<5;r++)t+=Math.floor(65535*Math.random()).toString(32);return"tmpl_"+t}();var o=t[n.url];return void 0===o&&(t[n.url]=o=r.Deferred(function(e){void 0===r.template[n.name]||n.force?(r.log("loading tmpl from ",n.url),r.ajax({url:n.url}).then(function(o,l,i){return t[n.url]=void 0,r.template(n.name,o),e.resolve(n.name),!0},function(r,o,l){return t[n.url]=void 0,e.reject(r),!1})):e.resolve(n.name)}).promise()),o},r.fn.loadTmpl=function(t,e){return this.each(function(){var n=r(this);r.loadTmpl(t).done(function(t){n.html(r.tmpl(t,e))})})}}(jQuery);
